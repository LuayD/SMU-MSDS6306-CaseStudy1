---
title: "SMU MSDS 6306 Case Study 1: Beers, Breweries, and Bitterness"
author: "Adil Siraj, Garrett Mozey, Dana Geislinger, & Luay Dajani"
date: "February 17, 2018"
output: 
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#Add all initialization and Library files here
install.packages("prettydoc")
library(prettydoc)
```

# Breweries

Study of popular Brewed Beers from American domestic and craft varieties; shining a light on what makes them similar and different.  The study analyses the Brews and styles from Lagers, Ales, to the sweet ciders in addition to their bitterness, alcohol content, and where their respective breweries.  From this study we look to find out trends and cultures depending on location and taste, and possibly their appeal to the consumers.

Goal is to analyze collected data, normalize and clean the data, and create analysis that will show an apperent relationship between the bitterness of the bear the alcoholic content. In addition show the bitterness and alcoholic content as per the location it was brewed to determine a trend in culture to that location.

Repository: https://github.com/danageis/SMU-MSDS6306-CaseStudy1

## Analysis 1: Number of Breweries per US State

```{r num_breweries}
# Import breweries data and preview data structure.
breweries = read.csv("Raw Data/Breweries.csv", header=TRUE)
str(breweries)

# Entries in 'State' column start with a space.
# Clean data by removing leading white-space and verify new structure.
breweries$State = as.factor(trimws(breweries$State))
str(breweries)

# Print number of breweries in each state.
# Since each row is a brewery, the number of occurences of each state equals the number of breweries in that state.
breweries.by.state = tapply(breweries$State, breweries$State, length)
print(breweries.by.state)

```

## Analysis 2: Merge of Beer & Breweries Data

```{r data_merge}
# Import beer data and preview data structure.
beers = read.csv("Raw Data/Beers.csv", header=TRUE)
str(beers)

# Change Brewery ID column name for beer data to match brewery data.
names(beers)[5] = "Brew_ID"

# Merge beer and brewery data by 'Brew_ID' and preview naming structure.
brew.data = merge(breweries, beers, by="Brew_ID", all=TRUE)
names(brew.data)

# Rename variables to be meaningful and verify new structure.
names(brew.data) = replace(names(brew.data), c(2, 5), c('Brew_Name', 'Beer_Name'))
str(brew.data)

# Print first 6 and last 6 observations of the merged data for verification.
head(brew.data, 6)
tail(brew.data, 6)

```

## Analysis 3: Missing Data (NA's in each column)

```{r data_missing}
# Create Vector Dataframe which indicates the missing data (NA's)  in each columns as TRUE or FALSE.
brew.data.missing = is.na(brew.data)

# Null out vector to be used in for loop
number_NAs = NULL

# Though not intened, creates vector of "Named ints" where the name of the row associated with each int value
for (i in colnames(brew.data.missing))
{
  tempvec = brew.data.missing[,i]
  number_NAs[i] = length(tempvec[tempvec != FALSE])
}

print(number_NAs)
```

## Analysis 4: Compute median alcohol content (ABV) and international bitterness unit (IBU) per each state.

```{r data_abv_ibu, fig.width=10, fig.height=9}
# Use "tapply" to find the the median IBU per state
ABV_medians = tapply(brew.data$ABV   # Take the IBU column (numeric)
                     , brew.data$State # Use the State column as the index (as factor) to associate IBU per State
                     , function (x) {median(x, na.rm = TRUE)} #Run created function finding the median per State removing NULLs
)

#Print out the results
cat("The Median Alcohol Content (ABV) per state:\n") #using cat to preserve the \n
print(ABV_medians)

#barplot of the ABV medians
par(las = 2) #make the x axis name horizontal with the horizontal view
par(mar=c(5,10,4,2)) # increase y-axis margin (c(bottom, left, top, right))
barplot(ABV_medians
        , main="Median Alcohol Content (ABV) per State"
        , xlab="Median ABV"
        , ylab="States"
        , cex.names=0.7 #Font Size for the State names to squeeze them all in
        , col=c("red","green","blue","orange","brown","purple","yellow")
        , horiz=TRUE
     )

# Use "tapply" to find the the median IBU per state
IBU_medians = tapply(brew.data$IBU   # Take the IBU column (numeric)
       , brew.data$State # Use the State column as the index (as factor) to associate IBU per State
       , function (x) {median(x, na.rm = TRUE)} #Run created function finding the median per State removing NULLs
)

#Print out the results
cat("The International Bitterness Unit (IBU) per each state:\n") #using cat to preserve the \n
print(IBU_medians)

#barplot of the ABV medians
par(las = 2) #make the y axis name horizontal with the horizontal view
par(mar=c(5,10,4,2)) # increase y-axis margin (c(bottom, left, top, right))
barplot(IBU_medians
        , main="Median International Bitterness Unit (IBU)  per State"
        , xlab="Median IBU"
        , ylab="States"
        , cex.names=0.7 #Font Size for the State names to squeeze them all in
        , col=c("red","green","blue","orange","brown","purple","yellow")
        , horiz=TRUE
)

```

## Analysis 5: Show which state has the maximum alcoholic (ABV) beer and well as the most bitter.

```{r data_state_statistics}
#

```

## Analysis 6: Summary of statistics for the alcohol content (ABV).

```{r data_abv_stats}
#

```

## Analysis 7: Prove relationship between the bitterness of the beer and its alcoholic content.

```{r ibu_vs_abv}
#

```

## Environment Notes

```{r environment_notes, echo=FALSE}
sessionInfo()

```